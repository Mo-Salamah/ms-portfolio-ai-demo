"""
تكوين منصة الذكاء الاصطناعي للمحفظة (أ)
"""

import os
from dotenv import load_dotenv

# Load environment variables
load_dotenv()

# API Configuration
ANTHROPIC_API_KEY = os.getenv("ANTHROPIC_API_KEY")

# Model Configuration
MODEL_NAME = "claude-opus-4-6"
MAX_TOKENS = 4096
DEFAULT_TEMPERATURE = 0.7
ANALYTICAL_TEMPERATURE = 0.3

# UI Theme Colors
THEME = {
    "primary": "#1a365d",
    "accent": "#d69e2e",
    "background": "#FFFFFF",
    "secondary_bg": "#f0f2f6",
    "text": "#1a365d",
    "control_bg": "#fef3c7",
}

# =============================================================================
# حالة الاستخدام ١: لجنة الفعاليات
# =============================================================================

PROJECT_1_CONFIG = {
    "id": "project1",
    "name": "لجنة الفعاليات",
    "name_en": "لجنة الفعاليات",
    "description": "برنامج ذكاء اصطناعي يمكّن فريق عمل لجنة الفعاليات من الإشراف على هيئات التطوير في إطار تطوير تقاويم المدن",
    "status": "متاح",
    "context": """حالة الاستخدام: لجنة الفعاليات

الهدف: تمكين فريق عمل لجنة الفعاليات من الإشراف على تقاويم المدن الخمس المستهدفة، من خلال تحليل بيانات الفعاليات الفعلية وضمان جاهزية المعلومات للجان الإشرافية.

النطاق:
- تحليل بيانات الفعاليات من خمس مدن مستهدفة
- تحديد الفجوات في البيانات والمعلومات الناقصة
- إعداد التقارير الدورية للجنة الإشرافية
- متابعة استكمال المعلومات مع الجهات المسؤولة

المدن المستهدفة:
- الرياض
- جدة
- العلا
- عسير
- حاضرة الدمام

الجهات المعنية:
- الجهات المسؤولة عن الفعاليات في كل مدينة
- اللجنة الإشرافية العليا
- فريق التنسيق والمتابعة

الموعد النهائي: اجتماع اللجنة - ١ سبتمبر ٢٠٢٧""",
    "memory": [
        {"date": "١٧ يناير ٢٠٢٧", "entry": "تم استلام قواعد بيانات الفعاليات من المدن الخمس المستهدفة"},
        {"date": "١٥ يناير ٢٠٢٧", "entry": "تحميل بيانات الفعاليات في النظام — الرياض وجدة والعلا وعسير وحاضرة الدمام"},
        {"date": "١٠ يناير ٢٠٢٧", "entry": "اجتماع تنسيقي مع فريق المتابعة — تم الاتفاق على قالب موحد"},
        {"date": "٥ يناير ٢٠٢٧", "entry": "إرسال طلب البيانات الأولي لجميع المدن المستهدفة"},
    ],
    "system_knowledge": "مدرّب على بيانات فعلية من قواعد بيانات تقاويم خمس مدن: الرياض وجدة والعلا وعسير وحاضرة الدمام",
    "available_files": ["riyadh_events.csv", "jeddah_events.csv", "ula_events.csv", "aseer_events.csv", "dammam_events.csv"],
    "capabilities": [
        "تحليل بيانات الفعاليات وإنتاج تقارير إحصائية",
        "تحديد المعلومات الناقصة وصياغة رسائل متابعة",
        "إعداد تقارير اللجان الإشرافية",
        "فحص جودة البيانات واكتمالها",
        "قراءة وتحليل ملفات CSV المحمّلة",
    ],
    "agents": [
        {
            "id": "coordinator",
            "name": "وكيل التنسيق",
            "name_en": "وكيل التنسيق",
            "description": "توجيه الطلبات وتنسيق سير العمل",
            "is_orchestrator": True
        },
        {
            "id": "data_analysis",
            "name": "وكيل تحليل البيانات",
            "name_en": "وكيل تحليل البيانات",
            "description": "تحليل بيانات الفعاليات وإنتاج التقارير التحليلية"
        },
        {
            "id": "followup",
            "name": "وكيل المتابعة والتواصل",
            "name_en": "وكيل المتابعة والتواصل",
            "description": "تحديد المعلومات الناقصة وصياغة رسائل المتابعة"
        },
        {
            "id": "reporting",
            "name": "وكيل إعداد التقارير",
            "name_en": "وكيل إعداد التقارير",
            "description": "تجميع النتائج وإعداد تقارير اللجان"
        },
        {
            "id": "quality_check",
            "name": "وكيل فحص الجودة",
            "name_en": "وكيل فحص الجودة",
            "description": "التحقق من اكتمال البيانات وجودتها"
        },
    ]
}

# =============================================================================
# حالة الاستخدام ٢: احتفالية مرور ٣٠٠ عام
# =============================================================================

PROJECT_2_CONFIG = {
    "id": "project2",
    "name": "احتفالية مرور ٣٠٠ عام على تأسيس الدولة السعودية",
    "name_en": "احتفالية مرور ٣٠٠ عام على تأسيس الدولة السعودية",
    "description": "تطوير الرؤية والإطار الاستراتيجي لاحتفالية وطنية تاريخية من خلال دراسة التجارب الدولية المشابهة واستخلاص الدروس المستفادة",
    "status": "متاح",
    "context": """حالة الاستخدام: احتفالية مرور ٣٠٠ عام على تأسيس الدولة السعودية

الهدف: تطوير الرؤية والإطار الاستراتيجي لاحتفالية وطنية تاريخية من خلال دراسة التجارب الدولية المشابهة واستخلاص الدروس المستفادة.

النطاق:
- دراسات مقارنة للاحتفاليات الدولية الكبرى
- تطوير إطار مؤشرات الأداء
- تحديد خيارات التموضع الاستراتيجي
- إعداد محتوى جاهز للعروض التقديمية

المخرجات المتوقعة:
- تقرير المقارنة المعيارية
- إطار مؤشرات الأداء الرئيسية
- خيارات الرؤية والتموضع
- عروض تقديمية للقيادة

المدة: ٢٠ أسبوع""",
    "memory": [
        {"date": "١٦ يناير ٢٠٢٧", "entry": "اكتمال البحث المعمق لتجربة سانت بطرسبرغ"},
        {"date": "١٢ يناير ٢٠٢٧", "entry": "اعتماد هيكل تقرير المقارنة المعيارية"},
        {"date": "٨ يناير ٢٠٢٧", "entry": "تحديد ٥ تجارب دولية للدراسة"},
        {"date": "٣ يناير ٢٠٢٧", "entry": "انطلاق مرحلة البحث والتحليل"},
    ],
    "system_knowledge": "مدرّب على دراسات مقارنة لاحتفاليات دولية كبرى: سانت بطرسبرغ وروما وبرشلونة",
    "available_files": ["benchmarks.json", "kpi_library.json"],
    "capabilities": [
        "إجراء دراسات مقارنة للتجارب الدولية",
        "تطوير إطار مؤشرات أداء",
        "مراجعة المخرجات وتقديم ملاحظات بناءة",
        "تنسيق المحتوى للعروض التقديمية",
    ],
    "agents": [
        {
            "id": "strategic_planning",
            "name": "وكيل التخطيط الاستراتيجي",
            "name_en": "وكيل التخطيط الاستراتيجي",
            "description": "إدارة سير العمل الاستراتيجي والتنسيق",
            "is_orchestrator": True
        },
        {
            "id": "benchmarking",
            "name": "وكيل المقارنة المعيارية",
            "name_en": "وكيل المقارنة المعيارية",
            "description": "إجراء البحوث المقارنة وتحليل التجارب الدولية"
        },
        {
            "id": "kpi",
            "name": "وكيل مؤشرات الأداء",
            "name_en": "وكيل مؤشرات الأداء",
            "description": "توصية مؤشرات الأداء وتحديد طرق القياس"
        },
        {
            "id": "critique",
            "name": "وكيل المراجعة",
            "name_en": "وكيل المراجعة",
            "description": "مراجعة المخرجات وتقديم ملاحظات بناءة"
        },
        {
            "id": "content_prep",
            "name": "وكيل إعداد المحتوى",
            "name_en": "وكيل إعداد المحتوى",
            "description": "تنسيق المحتوى للعروض التقديمية"
        },
    ]
}

# =============================================================================
# معايير إعداد الشرائح
# =============================================================================

PRESENTATION_GUIDELINES = """معايير إعداد الشرائح

١. العنوان التنفيذي
   كل شريحة تبدأ بعنوان يلخص الرسالة الرئيسية — جملة كاملة وليس مجرد وصف.

٢. رسالة واحدة لكل شريحة
   تركيز على فكرة رئيسية واحدة — المحتوى يدعم العنوان التنفيذي.

٣. هيكل المحتوى
   ٤-٦ نقاط كحد أقصى — كل نقطة جملة أو جملتين مدعومة بالبيانات.

٤. التنسيق البصري
   محاذاة من اليمين لليسار — استخدام الجداول للمقارنات.

٥. الختام والتوصيات
   كل قسم ينتهي بالدلالات والتوصيات مع ربط النتائج بالسياق المحلي."""

# =============================================================================
# صلاحيات المحفظة
# =============================================================================

STRATEGIC_CONTROL_TEXT = """صلاحيات المحفظة

- التحكم في مخرجات جميع الوكلاء
- تحديد معايير الجودة والأسلوب
- الوصول الحصري لقاعدة المعرفة الداخلية
- إدارة ذاكرة الوكلاء وتحديثها
- تخصيص الوكلاء حسب احتياجات المشروع

المخرجات تحت السيطرة الكاملة:
التقارير والتحليلات — العروض التقديمية — المراسلات الرسمية — مؤشرات الأداء"""

# =============================================================================
# كلمات مفتاحية لتصنيف النوايا
# =============================================================================

INTENT_KEYWORDS = {
    "benchmarking": [
        "مقارنة", "معايير", "دراسة حالة", "تجارب دولية",
        "أفضل الممارسات", "مقارن", "benchmark", "تحليل مقارن",
        "سانت بطرسبرغ", "روما", "برشلونة", "تجارب عالمية"
    ],
    "kpi": [
        "مؤشرات", "قياس", "أداء", "KPI", "تقييم",
        "مؤشر", "قياسات", "متابعة", "رصد", "مقاييس"
    ],
    "critique": [
        "مراجعة", "نقد", "تحسين", "تقييم", "تحليل نقدي",
        "راجع", "قيم", "حلل", "ملاحظات", "تعليقات"
    ],
    "data_analysis": [
        "تحليل", "بيانات", "إحصائيات", "توزيع", "إجمالي",
        "فعاليات", "تصنيف", "نوع", "جهة", "analyze", "analysis",
        "statistics", "data", "events", "total", "count",
        "الرياض", "جدة", "العلا", "عسير", "الدمام", "مدينة", "مدن"
    ],
    "followup": [
        "متابعة", "رسالة", "بريد", "تواصل", "ناقص",
        "مطلوب", "استكمال", "إرسال", "missing", "follow-up",
        "follow up", "email", "gap"
    ],
    "reporting": [
        "تقرير", "ملخص", "لجنة", "اجتماع", "تنفيذي",
        "report", "committee", "executive", "briefing", "summary"
    ],
    "slide": [
        "عرض", "شريحة", "تقديم", "ملخص", "عرض تقديمي",
        "شرائح", "بوربوينت", "تلخيص", "للعرض",
        "slide", "presentation", "convert", "format", "powerpoint"
    ],
    "quality_check": [
        "جودة", "فحص", "تحقق", "اكتمال", "صحة",
        "quality", "check", "validate", "verify", "complete", "accuracy"
    ]
}
